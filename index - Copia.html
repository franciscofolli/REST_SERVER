<!DOCTYPE html>
<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <script>
        $( document ).ready(function() {
            $("#formId").submit(function(e){
                e.preventDefault();

                //var data = {}
                var json = ConvertFormToJSON("#formId");
                var Form = this;
				json = JSON.stringify(json)
                alert(JSON.stringify(json));
                //alert(JSON.stringify($(Form).serialize()));
                //alert(JSON.stringify($(Form).serializeArray()));
                //alert(json );


                //Save Form Data........
                var settings = {
				"url": "http://192.168.15.251:8866/rest/appticketdfs/v1/servicedesk/create/",
				"method": "POST",
				"timeout": 0,
				"headers": {
				"XToken": "1234567890",
				"token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJsb2dpbl90aW1lIjoiMDkuMzg6NDUiLCJsb2dpbl9kYXRlIjoiMDMvMDIvMjAyMCIsImV4cGlyZWRfZGF0ZSI6IjAzLzAyLzIwMjAiLCJlbWFpbCI6ImZhYmlvLmZsb3JlbmNvQGRmc3Npc3RlbWFzLmNvbS5iciAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiLCJleHBpcmVkX3RpbWUiOiIxMDozODowMCIsImVtcHJlc2EiOiIwMDAwMDYiLCJzeXN0ZW0iOiJBUFAtREZTIiwiaWRVc2VyIjoiMDAwMDAzIn0=.qJZaphBoyqNvVsKxhNN6J6H5xo7WNjVVGGF8J58hClU=",
				"Content-Type": "application/x-www-form-urlencoded",
				"Authorization": "Basic ZmFiaW8uZGVzazphYmMxMjM="
				},
				"data": json};
				
				$.ajax(settings).done(function (response) {
					console.log(response);
					});
						});
					});
				
				
					function ConvertFormToJSON(form){
						console.log('ConvertFormToJSON invoked!');
						var array = jQuery(form).serializeArray();
						var json = {};
				
						jQuery.each(array, function() {
							json[this.name] = this.value || '';
						});
				
						console.log('JSON: '+json);
						return json;
					}
    </script>

</head>

<body>
    <form id="formId">
        <table>
            <tr> 
                <td>PRIORIDADE:</td>
                <td><select name="priority" id="priority" >
						<option value="0">URGENTE</option>
						<option value="1">Alta</option>
						<option value="2">Média</option>
						<option value="3">Baixa</option>
					</select> </td>
            </tr>
            <tr> 
                <td>Código de usuário:</td>
                <td><input type="text" size=100 name="IdUser" id="IdUser" value=""/></td>
            </tr>
            <tr> 
                <td>Titulo do chamado:</td>
                <td><input type="text" size=100 name="title" id="title" value=""/></td>
            </tr>
			<tr> 
                <td>Categoria:</td>
                <td><select name="idCategory" id="idCategory" >
						<option value="001">INTERNO</option>
						<option value="002">SISTEMA</option>
					</select> </td>
            </tr>
			<tr> 
                <td>Plataforma:</td>
                <td><select name="idPlataform"	 id="idPlataform" >
						<option value="000001">PROTHEUS</option>
						<option value="000002">SAP</option>
						<option value="000004">ORACLE</option>
					</select> </td>
            </tr>
			<tr> 
                <td>Assunto:</td>
                <td><input type="text" size=100 name="idSubject" id="idSubject" value=""/></td>
            </tr>
			<tr> 
                <td>Processo:</td>
                <td><input type="text" size=100 name="idProcess" id="idProcess" value=""/></td>
            </tr>
			<tr> 
                <td>Observador:</td>
                <td><input type="text" size=100 name="idUsrObs"	 id="idUsrObs" value=""/></td>
            </tr>
			<tr> 
                <td>Tag (pode ser deixado em branco):</td>
                <td><input type="text" size=100 name="tag"	 id="tag" value=""/></td>
            </tr>
			<tr> 
                <td>Descrição do chamado:</td>
                <td><input type="text" size=100 name="msg" id="msg" value=""/></td>
            </tr>
            <tr><td><input type="submit" value="Submit" /></td></tr>
        </table>
    </form>

</body>



</html>
